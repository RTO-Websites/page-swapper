var PageSwapper=function(e){var a,t,r,o,n,s,i,l,d,p=window,c=p.document,u=this,f={disableCache:!1,debug:!1,owlConfig:{},owlVersion:2},g={margin:20,mouseDrag:!1,touchDrag:!1,disableHash:!1},w=null,h="http://"+p.location.host,m=p.location.href,b="",v=!1;d=function(){p.$||(p.$=jQuery),e=$.extend(f,e),e.id="page-swapper",w=$($(e.container)[0]),w.is("body")&&(w.wrapInner('<div class="psw-body"></div>'),w=w.find("> .psw-body")),w.wrapInner('<div class="tab psw-starttab psw-tab"></div>'),$("body").on("click",'a:not(a[href*=".jpg"], a[href*=".jpeg"], a[href*=".png"], a[href*=".gif"], a[href*=".JPG"], a[href*=".GIF"], a[href*=".PNG"], a[href*=".JPEG"])',u.linkClick),$(p).on("popstate",function(){u.open(c.location.href)});var t=$.extend(g,e.owlConfig);t=$.extend(t,{items:1,singleItem:!0,autoHeight:!0}),w.addClass("psw-container");try{w.owlCarousel(t)}catch(r){return v=!0,void console.info("psw-init-error",r,w,t)}var o=w.find(".psw-starttab");o.attr("data-url",p.location.href),o.data("title",c.title),o.data("bodyclass",$("body").prop("class").replace("no-js","")),o.data("originalhtml",""),a("psw init",u,w,e),w.data("owl.carousel")&&w.data("owl.carousel")._plugins&&w.data("owl.carousel")._plugins.autoHeight&&setInterval(function(){w.data("owl.carousel")._plugins.autoHeight.update()},300),u.setClasses()},u.setArgs=function(a){e=$.extend(e,a)},u.linkClick=function(e){if(e&&e.target&&!v){var a=$(e.target);if(a.is("a")||(a=a.closest("a")),a.prop("href")&&!a.hasClass("no-ajax")){var t=a.prop("href");if(-1!==t.indexOf(h)&&-1===t.indexOf("mailto:")){var r=["zip","exe","rar","pdf","doc","gif","png","jpg","jpeg","bmp","mp4","mp3"],o=t.split(".");o=o[o.length-1],-1===$.inArray(o,r)&&(e.preventDefault(),u.open(t,e))}}}},u.open=function(o,n){var s=o.split("#");if(b="",o=s[0],"undefined"!=typeof s[1]&&(b=s[1]),w.trigger("psw-beforeopen",{container:w,url:o,hash:b,currentUrl:m,clickEvent:n}),a("psw beforeOpen",u,w,e,o,b,m),m===o)return void r();var i=w.find('.psw-tab[data-url="'+o+'"]');return i.length||(i=w.find('.psw-tab[data-url="'+o+'/"]')),i.length>0?void u.openFromCache(i,o,n):($("body").removeClass("psw-finish-loading").addClass("psw-loading"),$.ajax({dataType:"text",type:"GET",url:o,data:null,success:function(e,a,r){t(e,a,o,r)},error:function(){$("body").removeClass("psw-loading"),$("body").addClass("psw-loaderror"),errorTimeout=setTimeout(function(){$("body").removeClass("psw-loaderror")},1e3)}}),w.trigger("psw-loadstart",{container:w,url:o,hash:b,currentUrl:m,clickEvent:n}),void a("psw loadstart",u,w,e,o,b,m))},t=function(t,r,s,i){$("body").removeClass("psw-loading").addClass("psw-finish-loading");var d=$('<div class="tab psw-tab" />'),p="";if(!i)return!1;var c=i.getResponseHeader("Content-Type");if(-1===c.indexOf("text/html"))return!1;a("psw loadComplete",u,w,e,s,b,m,i);var f=u.getCurrent(),g=t.match(/<title>(.*?)<\/title>/);g=g&&g[1]?g[1]:"",t=t.replace("<body",'<body><div id="psw-body"').replace("</body>","</div></body");var h=$.parseHTML(t,!0);if(h=$(h),h.filter("#psw-body").length>0){p=h.filter("#psw-body").prop("class").replace("no-js","");var v=$("body").prop("class");"body"===e.selector&&(p+=" page-swapper "),$("body").removeClass(v).addClass(p)}var y=h.find(e.selector);0===y.length&&(y=h.filter("#psw-body")),1==e.owlVersion?(w.data("owlCarousel").addItem(d),u.setClasses()):(w.trigger("add.owl.carousel",d),w.trigger("refresh.owl.carousel")),n(f),d.data("originalhtml",y.html());try{d.html(y.html())}catch(C){y.find("script").remove(),d.html(y.html())}o(s,g),d.attr("data-url",s).data("title",g),d.data("bodyclass",p),d.parent().addClass("psw-item"),u.jumpTo(d.parent().index()),l(d.parent(),{container:w,oldTab:f,newTab:d.parent(),url:s,currentUrl:m})},u.openFromCache=function(t,r,d){var p=u.getCurrent();n(p),s(t.parent());var c=t.data("originalhtml");if(!c)return i(t),void u.open(r,d);t.empty().html(c),o(r,t.data("title")),a("psw openFromCache",r,t);var f=t.data("bodyclass");"body"===e.selector&&(f+=" page-swapper "),$("body").removeClass($("body").prop("class")).addClass(f),l(t.parent(),{container:w,oldTab:u.getCurrent(),newTab:t.parent(),url:r})},l=function(a,t){w.trigger("psw-loadcomplete",t),u.jumpTo(a.index()),"undefined"!=typeof _gaq&&null!==_gaq&&_gaq.push(["_trackPageview",e.url]),"undefined"!=typeof ga&&null!==ga&&ga("send","pageview",location.pathname)},u.jumpTo=function(a){1==e.owlVersion?w.data("owlCarousel").goTo(a):w.trigger("to.owl.carousel",a)},r=function(){a("psw checkHash",u,w,e,b,m),!e.disableHash&&b&&$("#"+b).length>0&&($("html,body").animate({scrollTop:$("#"+b).offset().top},600),b="")},n=function(e){e.find("*").each(function(e,a){a.id.length>0&&(a.id="psw-rm-"+a.id)})},i=function(a){1==e.owlVersion?(w.data("owlCarousel").removeItem(a.index()),u.setClasses()):(w.trigger("remove.owl.carousel",a.index()),w.trigger("refresh.owl.carousel"))},s=function(e){e.find("*").each(function(e,a){a.id.length>0&&(a.id=a.id.replace("psw-rm-",""))})},u.setClasses=function(){w.addClass("psw-container"),w.addClass("owl-carousel"),w.find("> .owl-stage-outer, > .owl-wrapper-outer").addClass("psw-stage-outer"),w.find("> .owl-stage-outer > .owl-stage, > .owl-wrapper-outer > .owl-wrapper").addClass("psw-stage"),w.find(".psw-stage > .owl-item").addClass("psw-item")},u.getCurrent=function(){var a;return a=1==e.owlVersion?w.find(".psw-item:nth-child("+w.data("owlCarousel").currentItem+")"):w.find(".psw-item.active")},o=function(e,a){m=e,p.history&&"undefined"!=typeof p.history.pushState&&(p.history.pushState({},a,e),c.title=a)},u.changeCurrentUrl=function(e){m=e},a=function(){e.debug&&console.info(arguments)},u._debug=function(a){e.debug=a},d()};jQuery.fn.pageSwapper=function(e){"undefined"==typeof e&&(e={}),e.selector=this.selector,this.each(function(a,t){"undefined"==typeof document.pageSwapperInstance&&(e.container=jQuery(t),document.pageSwapperInstance=new PageSwapper(e))})};